{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>场景编辑</title>
    <link rel="stylesheet" type="text/css" href="{% static 'panorama/css/common.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'panorama/css/edit.css' %}"/>
</head>

<body>
<div id="mask"></div>
<div id="loading">
    <div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
    <div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>

<img src="{% static 'panorama/img/play.png' %}" id="play-btn">
<div id="edit-sidebar">
    <div id="name-bar">
        <div style="float:left;margin-top:12px;margin-left:20px;"><img src="{% static 'panorama/img/icon/logo.png' %}">
        </div>
    </div>
    <div id="option-bar">
        <div id="add-space">&nbsp;&nbsp;&nbsp;添加空间</div>
        <div style="float:right;width:194px">
            <div class="option-ele">
                <span id="edit-info">编辑信息</span>
            </div>
            <div class="option-ele">
                <span id="save-as">保存</span>
            </div>
            <div class="option-ele">
                <span id="preview">预览</span>
                <div id="qr-code">
                    <span class="qr-text" style="margin-top:20px;">微信扫一扫 查看全景图</span>
                    <div>
                        <canvas id="qr-canvas" title="扫码浏览"></canvas>
                    </div>
                    <a href="#" id="view-link" target="_blank">点击打开全景图</a>
                </div>
            </div>
        </div>
    </div>

    <ul id="space-bar"></ul>
</div>

<div id="transform-panel">
    <button id="reset-transform">重置</button>
    <input type="range" min="0.3" max="1" step="0.01" data-default="1" value="1" title="透明度" id="opacity"/>
    <input type="range" min="-1.5" max="1.5" step="0.005" data-default="0" value="0" title="x轴" id="x-axis"/>
    <input type="range" min="-1.5" max="1.5" step="0.005" data-default="0" value="0" title="y轴" id="y-axis"/>
    <input type="range" min="-1.5" max="1.5" step="0.005" data-default="0" value="0" title="z轴" id="z-axis"/>
    <input type="range" min="-90" max="0" step="1" data-default="0" value="0" title="视线距离" id="distance"/>
    <button id="save-transform">保存</button>
</div>

<ul id="more-panel">
    <li id="pick-hot">
        <svg
                xmlns:svg="http://www.w3.org/2000/svg"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 200 200"
                version="1.1">
            <path d="m 62.5,31.433332 c 0,-13.7632 -11.2,-24.9333336 -25,-24.9333336 -13.8,0 -25,11.1701336 -25,24.9333336 0,13.7632 11.2,24.933334 25,24.933334 13.8,0 25,-11.170134 25,-24.933334 z m 43.75,12.466667 c 10.35,0 18.75,-8.3776 18.75,-18.7 0,-10.3224 -8.4,-18.7000006 -18.75,-18.7000006 -10.35,0 -18.75,8.3776006 -18.75,18.7000006 0,10.3224 8.4,18.7 18.75,18.7 z m 62.5,-24.933334 c -10.35,0 -18.75,8.3776 -18.75,18.700001 0,10.3224 8.4,18.7 18.75,18.7 10.35,0 18.75,-8.3776 18.75,-18.7 0,-10.322401 -8.4,-18.700001 -18.75,-18.700001 z M 104.9,56.603533 C 89.85,56.366666 72.725,58.685466 59.0125,70.803066 45.2875,82.920666 47,113.18973 66.4,121.33047 c 19.4125,8.12826 23.6875,22.19066 18.4875,39.69386 -5.2,17.5032 3.675,32.47567 25.8625,32.47567 38.25,0 51.75,-35.74193 51.75,-75.78487 0,-43.546064 -17.1625,-60.500731 -57.6,-61.111597 z"/>
        </svg>
    </li>
    <li id="transform-hot">
        <svg
                xmlns:svg="http://www.w3.org/2000/svg"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 200 200"
                version="1.1">
            {#            <path d="m 62.5,31.433332 c 0,-13.7632 -11.2,-24.9333336 -25,-24.9333336 -13.8,0 -25,11.1701336 -25,24.9333336 0,13.7632 11.2,24.933334 25,24.933334 13.8,0 25,-11.170134 25,-24.933334 z m 43.75,12.466667 c 10.35,0 18.75,-8.3776 18.75,-18.7 0,-10.3224 -8.4,-18.7000006 -18.75,-18.7000006 -10.35,0 -18.75,8.3776006 -18.75,18.7000006 0,10.3224 8.4,18.7 18.75,18.7 z m 62.5,-24.933334 c -10.35,0 -18.75,8.3776 -18.75,18.700001 0,10.3224 8.4,18.7 18.75,18.7 10.35,0 18.75,-8.3776 18.75,-18.7 0,-10.322401 -8.4,-18.700001 -18.75,-18.700001 z M 104.9,56.603533 C 89.85,56.366666 72.725,58.685466 59.0125,70.803066 45.2875,82.920666 47,113.18973 66.4,121.33047 c 19.4125,8.12826 23.6875,22.19066 18.4875,39.69386 -5.2,17.5032 3.675,32.47567 25.8625,32.47567 38.25,0 51.75,-35.74193 51.75,-75.78487 0,-43.546064 -17.1625,-60.500731 -57.6,-61.111597 z"/>#}
            <g>
                <path
                        d="m 17.56462,7.9663541 -11.9327315,0 11.9928595,-4.0976375 c 0.751862,-0.231533 1.180327,-1.033648 0.955905,-1.7938192 L 18.273173,1.0336037 C 18.093477,0.4250304 17.527875,-1.1146848e-6 16.897705,-1.1146848e-6 c -0.138296,0 -0.276055,0.020259124685 -0.409417,0.060172654685 l -0.0098,0.0029374 L 2.0155485,5.0046972 C 1.2636861,5.2362301 0.83519958,6.038345 1.0596643,6.7985379 l 0.3074592,1.0412722 c 0.084775,0.287062 0.2554616,0.5332385 0.4782531,0.7132814 -0.1767789,0.2402156 -0.2815463,0.5372561 -0.2815463,0.858508 l 0,9.1431775 c 0,0.796889 0.643899,1.445224 1.4353814,1.445224 l 14.5654083,0 c 0.791462,0 1.435382,-0.648335 1.435382,-1.445224 l 0,-9.1431775 C 19.000023,8.6146896 18.356103,7.9663541 17.56462,7.9663541 Z m 0.362846,1.4452238 0,1.4516171 -4.206139,0 1.457541,-1.8169295 2.385752,0 c 0.200075,0 0.362846,0.1638657 0.362846,0.3653124 z M 2.9992117,9.0462655 l 3.6503617,0 -1.6019925,1.6129985 c -0.059098,0.0595 -0.1015066,0.12946 -0.1272481,0.203931 l -2.283924,0 0,-1.4516171 c 0,-0.2014467 0.1627497,-0.3653124 0.3628029,-0.3653124 z m 5.0545317,0.1134338 c 0.034408,-0.034643 0.063045,-0.072872 0.086148,-0.1134338 l 5.6602686,0 -1.32804,1.6555255 c -0.03986,0.0497 -0.06946,0.104363 -0.08922,0.161404 l -6.0210554,0 1.691894,-1.7034957 z M 2.3321244,6.0364876 2.3419444,6.0335476 16.801577,1.093104 c 0.03166,-0.00875 0.06395,-0.013175 0.09608,-0.013175 0.159082,0 0.301947,0.107516 0.347379,0.261425 l 0.307481,1.0412938 c 0.057,0.1930665 -0.05262,0.3968674 -0.244392,0.4542538 l -0.0098,0.00294 -14.4596116,4.9404652 c -0.031662,0.00875 -0.063924,0.013175 -0.096058,0.013175 -0.1591031,0 -0.3019463,-0.1075158 -0.3474011,-0.2614466 L 2.0877745,6.4907632 C 2.0307359,6.2976965 2.1403512,6.0938958 2.3321244,6.0364876 Z M 17.56462,18.920068 l -14.5654083,0 c -0.2000532,0 -0.3628245,-0.163887 -0.3628245,-0.365312 l 0,-6.61165 15.2910578,0 0,6.61165 c 2.1e-5,0.201425 -0.16275,0.365312 -0.362825,0.365312 z"/>
            </g>
        </svg>
    </li>
</ul>

<svg id="more-btn"
     xmlns:svg="http://www.w3.org/2000/svg"
     xmlns="http://www.w3.org/2000/svg"
     viewBox="0 0 200 200"
     version="1.1">
    <path d="m 12.5,12.5 35,0 0,35 -35,0 0,-35 z m 52.5,0 122.5,0 0,35 -122.5,0 0,-35 z m -52.5,70 35,0 0,35 -35,0 0,-35 z m 52.5,0 122.5,0 0,35 -122.5,0 0,-35 z m -52.5,70 35,0 0,35 -35,0 0,-35 z m 52.5,0 122.5,0 0,35 -122.5,0 0,-35 z"/>
</svg>

<!--编辑商家信息-->
<div class="dialog" id="edit-seller-dialog">
    <div class="dialog-title">
        <div class="dialog-name">编辑信息</div>
        <div class="dialog-close">×</div>
    </div>
    <form action="{% url 'update_seller' %}" enctype="multipart/form-data" method="post" target="upload_iframe">
        <div class="dialog-ele" style="margin-top:60px;">
            <div class="dialog-ele-title">商家logo:</div>
            <div class="dialog-ele-content">
                <label for="logo-input" id="upload-pic" class="btn">重新上传</label>
                <input type="file" id="logo-input" name="logo" accept="image/gif, image/jpeg, image/png"
                       style="display: none">
            </div>
        </div>
        <div class="dialog-ele" id="dialog-img-ele" style="height:110px;">
            <div class="dialog-ele-title"></div>
            <div class="dialog-ele-content" style="height:110px;">
                <img id="seller-logo" src=""/>
            </div>
        </div>
        <div class="dialog-ele" style="">
            <div class="dialog-ele-title">商家名称:</div>
            <div class="dialog-ele-content">
                <input type="text" id="seller-name" name="name" placeholder="限制10个字" value="" maxlength="10"/>
            </div>
        </div>
        <div class="dialog-ele" style="height:130px;">
            <div class="dialog-ele-title">商家介绍:</div>
            <div class="dialog-ele-content" style="height:120px;margin-top:10px;">
                <textarea id="seller-desc" name="desc" placeholder="输入商家介绍，限制60字" maxlength="60"></textarea>
            </div>
        </div>
        <input type="hidden" id="seller_id" name="seller_id" value="">
        <input type="hidden" name="cb" value="getResultStr">
    </form>
    <div class="dialog-operation" style="margin:50px auto 50px 220px;">
        <a class="btn dialog-cancel">取消</a>
        <a class="btn dialog-confirm">确定</a>
    </div>
</div>
<iframe id="upload_iframe" name="upload_iframe" src="" style="display: none;"></iframe>

<!--另存为-->
<div class="dialog" id="save-as-dialog">
    <div class="dialog-title">
        <div class="dialog-name">保存为</div>
        <div class="dialog-close">×</div>
    </div>
    <div class="dialog-ele" style="margin-top:70px;">
        <input type="text" id="scene-title" placeholder="输入全景图名称，限制10个字" value="" maxlength="10"/>
    </div>
    <div class="dialog-operation" style="margin:50px auto 60px 115px;">
        <a class="btn dialog-cancel">取消</a>
        <a class="btn dialog-confirm">确定</a>
    </div>

</div>

<!--添加空间-->
<div class="dialog" id="add-space-dialog">
    <div class="dialog-title">
        <div class="dialog-name">添加空间</div>
        <div class="dialog-close">×</div>
    </div>
    <div id="spaces-container"></div>
    <div class="dialog-operation" style="margin:40px auto 20px 275px;">
        <a class="btn dialog-cancel">取消</a>
        <a class="btn dialog-confirm">确定</a>
    </div>
</div>

<span id="hot-title"></span>

<div id="context-menu">
    <ul>
        <li id="add-hot">在此处添加热点</li>
        <li class="disabled">修改此热点</li>
        <li class="disabled">删除此热点</li>
    </ul>
</div>

<!-- 添加热点对话框 -->
<div id="add-hot-dialog">
    <div class="header">选择目标场景:<i>×</i></div>
    <div class="body">
        <select title=""></select>
        <input type="text" placeholder="热点标题">
    </div>
    <div class="footer">
        <button class="add-btn">添加</button>
        <button class="redo-btn">重新选择</button>
    </div>
</div>

<!-- 编辑热点对话框 -->
<div id="edit-hot-dialog">
    <div class="header">编辑热点:<i>×</i></div>
    <div class="body">
        <label>
            跳转至：
            <select title=""></select>
        </label>
        <br>
        <label>
            描述：
            <input type="text" name="title">
        </label>
    </div>
    <div class="footer">
        <button class="btn del-btn">删除</button>
        <button class="btn update-btn">更新</button>
    </div>
</div>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="{% static 'panorama/lib/jquery_2_2_4.min.js' %}"><\/script>')</script>
<script src="//cdn.bootcss.com/jquery-easing/1.3/jquery.easing.min.js"></script>
<script>$.easing.easeInOutQuad || document.write('<script src="{% static 'panorama/lib/jquery.easing_1_3.min.js' %}"><\/script>')</script>
<script src="{% static 'panorama/lib/jquery-ui.min.js' %}"></script>
<script src="{% static 'panorama/lib/three.js/stats.min.js' %}"></script>
<script src="{% static 'panorama/lib/three.js/three.js' %}"></script>
<script src="{% static 'panorama/lib/three.js/StereoEffect.js' %}"></script>
<script src="{% static 'panorama/lib/three.js/DeviceOrientationControls.js' %}"></script>
<script src="{% static 'panorama/lib/three.js/OrbitControls.js' %}"></script>
<script src="{% static 'panorama/lib/tweenjs/Tween.js' %}"></script>
<script src="{% static 'panorama/lib/qrcode.min.js' %}"></script>
<script src="{% static 'panorama/js/utils.js' %}"></script>
<script src="{% static 'panorama/js/vray.scene.js' %}"></script>
<script src="{% static 'panorama/js/edit.js' %}"></script>
</body>
</html>